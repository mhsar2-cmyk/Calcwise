<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="google-site-verification" content="vjZJ7FIIQEzuqWHnktvhfF-XDMZ4jFHz1xGMrJgskS0" />
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CalcWise â€“ Free Online Calculators for Finance, Health & Math</title>
<meta name="description" content="Free online calculators for finance, health, fitness, and math. Instant results, no signup required. Mortgage, BMI, loan, calorie, and 30+ more calculators.">
<meta name="keywords" content="online calculator, mortgage calculator, BMI calculator, loan calculator, calorie calculator, free calculators">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Instrument+Serif:ital@0;1&family=Outfit:wght@300;400;500;600;700&display=swap" rel="stylesheet">
  <script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js?client=ca-pub-5388783007820121"
     crossorigin="anonymous"></script>
<style>
:root {
  --bg: #0a0a0f;
  --surface: #13131a;
  --surface2: #1c1c27;
  --border: #2a2a3d;
  --border2: #363650;
  --text: #e8e8f0;
  --muted: #7070a0;
  --muted2: #9090b8;
  --accent: #6c63ff;
  --accent2: #8b84ff;
  --accent3: #b3aeff;
  --green: #22d3a0;
  --orange: #ff8c42;
  --pink: #ff6b9d;
  --blue: #4da6ff;
  --yellow: #ffd166;
  --radius: 14px;
  --radius-sm: 8px;
  --shadow: 0 4px 24px rgba(0,0,0,0.4);
  --shadow-lg: 0 8px 48px rgba(0,0,0,0.5);
  --glow: 0 0 40px rgba(108,99,255,0.15);
}

*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }
html { scroll-behavior: smooth; }

body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  min-height: 100vh;
  overflow-x: hidden;
}

/* Background grid pattern */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0;
  background-image:
    linear-gradient(rgba(108,99,255,0.03) 1px, transparent 1px),
    linear-gradient(90deg, rgba(108,99,255,0.03) 1px, transparent 1px);
  background-size: 40px 40px;
  pointer-events: none;
}

/* â”€â”€ NAV â”€â”€ */
nav {
  position: sticky; top: 0; z-index: 100;
  background: rgba(10,10,15,0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 0 2rem;
}
.nav-inner {
  max-width: 1280px; margin: 0 auto;
  display: flex; align-items: center; justify-content: space-between;
  height: 60px;
}
.logo {
  font-family: 'Instrument Serif', serif;
  font-size: 1.5rem; color: var(--text);
  text-decoration: none; letter-spacing: -0.02em;
  display: flex; align-items: center; gap: 0.4rem;
}
.logo-dot { color: var(--accent); }
.nav-search {
  display: flex; align-items: center;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 100px; padding: 0.4rem 1rem;
  gap: 0.5rem; width: 260px;
  transition: border-color 0.2s;
}
.nav-search:focus-within { border-color: var(--accent); }
.nav-search input {
  background: none; border: none; outline: none;
  color: var(--text); font-family: inherit;
  font-size: 0.875rem; width: 100%;
}
.nav-search input::placeholder { color: var(--muted); }
.nav-cats {
  display: flex; gap: 0.25rem; list-style: none;
}
.nav-cats button {
  background: none; border: none; cursor: pointer;
  color: var(--muted); font-family: inherit;
  font-size: 0.85rem; font-weight: 500;
  padding: 0.35rem 0.85rem; border-radius: 100px;
  transition: all 0.2s;
}
.nav-cats button:hover, .nav-cats button.active {
  background: var(--surface2); color: var(--text);
}

/* â”€â”€ HERO â”€â”€ */
.hero {
  position: relative; z-index: 1;
  text-align: center;
  padding: 5rem 2rem 3.5rem;
  overflow: hidden;
}
.hero-glow {
  position: absolute; top: -100px; left: 50%;
  transform: translateX(-50%);
  width: 600px; height: 400px;
  background: radial-gradient(ellipse, rgba(108,99,255,0.2) 0%, transparent 70%);
  pointer-events: none;
}
.hero-eyebrow {
  display: inline-flex; align-items: center; gap: 0.5rem;
  border: 1px solid var(--border2);
  background: var(--surface);
  padding: 0.35rem 1rem; border-radius: 100px;
  font-size: 0.8rem; color: var(--muted2);
  margin-bottom: 1.75rem;
  letter-spacing: 0.05em; text-transform: uppercase;
}
.hero-eyebrow span { color: var(--accent2); }
.hero h1 {
  font-family: 'Instrument Serif', serif;
  font-size: clamp(2.8rem, 7vw, 5rem);
  line-height: 1.08; letter-spacing: -0.03em;
  margin-bottom: 1.25rem;
}
.hero h1 em { font-style: italic; color: var(--accent2); }
.hero p {
  font-size: 1.1rem; color: var(--muted2);
  max-width: 520px; margin: 0 auto 2.5rem;
  font-weight: 300; line-height: 1.7;
}
.hero-stats {
  display: flex; justify-content: center; gap: 3rem;
  flex-wrap: wrap;
}
.stat { text-align: center; }
.stat-num {
  font-family: 'Instrument Serif', serif;
  font-size: 2rem; color: var(--text);
  display: block; letter-spacing: -0.02em;
}
.stat-label { font-size: 0.8rem; color: var(--muted); }

/* â”€â”€ AD BANNER â”€â”€ */
.ad-wrap {
  position: relative; z-index: 1;
  max-width: 1280px; margin: 0 auto;
  padding: 0 2rem;
}
.ad-unit {
  background: var(--surface);
  border: 1px dashed var(--border2);
  border-radius: var(--radius);
  display: flex; align-items: center; justify-content: center;
  color: var(--muted); font-size: 0.72rem;
  letter-spacing: 0.08em; text-transform: uppercase;
}
.ad-unit.leaderboard { height: 90px; margin: 1.5rem 0; }
.ad-unit.rectangle { height: 250px; max-width: 336px; }
.ad-unit.sidebar { height: 600px; width: 160px; }

/* â”€â”€ MAIN LAYOUT â”€â”€ */
.main-wrap {
  position: relative; z-index: 1;
  max-width: 1280px; margin: 0 auto;
  padding: 2rem;
  display: grid;
  grid-template-columns: 1fr 180px;
  gap: 2rem;
  align-items: start;
}
.main-content { min-width: 0; }
.sidebar-col { position: sticky; top: 80px; }

/* â”€â”€ CATEGORY TABS â”€â”€ */
.cat-tabs {
  display: flex; gap: 0.5rem; flex-wrap: wrap;
  margin-bottom: 2rem;
}
.cat-tab {
  display: flex; align-items: center; gap: 0.5rem;
  background: var(--surface); border: 1px solid var(--border);
  border-radius: 100px; padding: 0.45rem 1rem;
  cursor: pointer; font-family: inherit;
  font-size: 0.85rem; font-weight: 500; color: var(--muted2);
  transition: all 0.2s;
}
.cat-tab:hover { border-color: var(--border2); color: var(--text); }
.cat-tab.active {
  background: var(--accent); border-color: var(--accent);
  color: white;
}
.cat-tab .tab-icon { font-size: 1rem; }

/* â”€â”€ CALCULATOR GRID â”€â”€ */
.calc-grid {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
  gap: 1.25rem;
  margin-bottom: 2rem;
}
.calc-card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.5rem;
  cursor: pointer;
  transition: all 0.25s cubic-bezier(0.34, 1.3, 0.64, 1);
  position: relative; overflow: hidden;
}
.calc-card::before {
  content: '';
  position: absolute; top: 0; left: 0; right: 0;
  height: 2px;
  background: linear-gradient(90deg, var(--card-color, var(--accent)), transparent);
  opacity: 0; transition: opacity 0.2s;
}
.calc-card:hover {
  border-color: var(--border2);
  transform: translateY(-3px);
  box-shadow: var(--shadow);
}
.calc-card:hover::before { opacity: 1; }
.card-icon {
  width: 44px; height: 44px;
  background: var(--surface2);
  border-radius: 10px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.3rem; margin-bottom: 0.9rem;
  transition: background 0.2s;
}
.calc-card:hover .card-icon { background: color-mix(in srgb, var(--card-color, var(--accent)) 15%, var(--surface2)); }
.calc-card h3 { font-size: 0.95rem; font-weight: 600; margin-bottom: 0.3rem; }
.calc-card p { font-size: 0.8rem; color: var(--muted); line-height: 1.5; }
.card-tag {
  position: absolute; top: 1rem; right: 1rem;
  background: var(--card-color, var(--accent));
  color: white; font-size: 0.62rem;
  font-weight: 700; letter-spacing: 0.06em;
  text-transform: uppercase; padding: 0.2rem 0.5rem;
  border-radius: 4px; opacity: 0.9;
}

/* â”€â”€ CALCULATOR MODAL â”€â”€ */
.modal-overlay {
  position: fixed; inset: 0; z-index: 200;
  background: rgba(0,0,0,0.7);
  backdrop-filter: blur(8px);
  display: none; align-items: center; justify-content: center;
  padding: 1rem;
}
.modal-overlay.open { display: flex; }
.modal {
  background: var(--surface);
  border: 1px solid var(--border2);
  border-radius: 20px;
  width: 100%; max-width: 680px;
  max-height: 90vh; overflow-y: auto;
  box-shadow: var(--shadow-lg);
  animation: modalIn 0.3s cubic-bezier(0.34, 1.4, 0.64, 1);
}
@keyframes modalIn {
  from { opacity: 0; transform: translateY(20px) scale(0.97); }
  to { opacity: 1; transform: translateY(0) scale(1); }
}
.modal-header {
  display: flex; align-items: center; gap: 1rem;
  padding: 1.5rem 1.75rem; border-bottom: 1px solid var(--border);
}
.modal-icon {
  width: 52px; height: 52px; border-radius: 12px;
  background: var(--surface2);
  display: flex; align-items: center; justify-content: center;
  font-size: 1.5rem; flex-shrink: 0;
}
.modal-header h2 {
  font-family: 'Instrument Serif', serif;
  font-size: 1.5rem; letter-spacing: -0.02em;
}
.modal-header p { font-size: 0.83rem; color: var(--muted2); margin-top: 0.15rem; }
.modal-close {
  margin-left: auto; background: var(--surface2);
  border: 1px solid var(--border); border-radius: 8px;
  width: 36px; height: 36px; cursor: pointer;
  color: var(--muted2); font-size: 1.1rem;
  display: flex; align-items: center; justify-content: center;
  transition: all 0.2s; flex-shrink: 0;
}
.modal-close:hover { border-color: var(--border2); color: var(--text); }
.modal-body { padding: 1.75rem; }

/* â”€â”€ FORM ELEMENTS â”€â”€ */
.field-group { margin-bottom: 1.25rem; }
.field-group label {
  display: block; font-size: 0.82rem;
  font-weight: 600; color: var(--muted2);
  margin-bottom: 0.4rem; letter-spacing: 0.03em;
  text-transform: uppercase;
}
.input-wrap { position: relative; }
.input-prefix, .input-suffix {
  position: absolute; top: 50%; transform: translateY(-50%);
  color: var(--muted); font-size: 0.9rem; font-weight: 500;
  pointer-events: none;
}
.input-prefix { left: 0.9rem; }
.input-suffix { right: 0.9rem; }
input[type="number"], input[type="text"], select {
  width: 100%; background: var(--surface2);
  border: 1px solid var(--border); border-radius: var(--radius-sm);
  padding: 0.7rem 0.9rem; font-family: inherit;
  font-size: 0.95rem; color: var(--text); outline: none;
  transition: border-color 0.2s;
  appearance: none;
}
input[type="number"]:focus, input[type="text"]:focus, select:focus {
  border-color: var(--accent);
}
.has-prefix input { padding-left: 2rem; }
.has-suffix input { padding-right: 2.5rem; }
select { cursor: pointer; }
.field-row { display: grid; grid-template-columns: 1fr 1fr; gap: 1rem; }
.field-row-3 { display: grid; grid-template-columns: 1fr 1fr 1fr; gap: 1rem; }

.calc-btn {
  width: 100%; background: var(--accent);
  border: none; border-radius: var(--radius-sm);
  padding: 0.85rem; color: white;
  font-family: inherit; font-size: 1rem; font-weight: 600;
  cursor: pointer; transition: all 0.2s;
  margin-top: 0.5rem;
}
.calc-btn:hover { background: var(--accent2); transform: translateY(-1px); }

/* â”€â”€ RESULTS â”€â”€ */
.results {
  display: none; margin-top: 1.5rem;
  background: var(--surface2); border: 1px solid var(--border2);
  border-radius: var(--radius); padding: 1.5rem;
}
.results.show { display: block; }
.results h3 {
  font-size: 0.75rem; font-weight: 600; color: var(--muted);
  text-transform: uppercase; letter-spacing: 0.08em;
  margin-bottom: 1rem;
}
.result-grid {
  display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
  gap: 1rem;
}
.result-item { text-align: center; }
.result-value {
  font-family: 'Instrument Serif', serif;
  font-size: 1.8rem; color: var(--accent2);
  display: block; line-height: 1.1;
  letter-spacing: -0.02em;
}
.result-label { font-size: 0.78rem; color: var(--muted); margin-top: 0.25rem; }
.result-highlight {
  background: linear-gradient(135deg, rgba(108,99,255,0.15), rgba(108,99,255,0.05));
  border: 1px solid rgba(108,99,255,0.3);
  border-radius: 10px; padding: 1rem;
  text-align: center; margin-bottom: 1rem;
}
.result-highlight .result-value { font-size: 2.4rem; }
.result-note {
  font-size: 0.8rem; color: var(--muted);
  margin-top: 1rem; padding-top: 1rem;
  border-top: 1px solid var(--border); line-height: 1.6;
}

/* Result bar chart */
.result-bar { margin-top: 1rem; }
.bar-row {
  display: flex; align-items: center; gap: 0.75rem;
  margin-bottom: 0.6rem; font-size: 0.82rem;
}
.bar-label { width: 130px; color: var(--muted2); flex-shrink: 0; text-align: right; }
.bar-track {
  flex: 1; background: var(--surface);
  border-radius: 100px; height: 8px; overflow: hidden;
}
.bar-fill { height: 100%; border-radius: 100px; transition: width 0.6s ease; }
.bar-val { width: 80px; color: var(--text); font-weight: 500; }

/* â”€â”€ MODAL AD â”€â”€ */
.modal-ad {
  background: var(--bg); border: 1px dashed var(--border);
  border-radius: var(--radius-sm); margin-top: 1.5rem;
  height: 90px; display: flex; align-items: center;
  justify-content: center; color: var(--muted);
  font-size: 0.7rem; letter-spacing: 0.08em; text-transform: uppercase;
}

/* â”€â”€ SECTION HEADER â”€â”€ */
.section-head {
  display: flex; align-items: center; gap: 0.75rem;
  margin-bottom: 1.25rem;
}
.section-head h2 {
  font-family: 'Instrument Serif', serif;
  font-size: 1.4rem; letter-spacing: -0.02em;
}
.section-badge {
  background: var(--surface2); border: 1px solid var(--border2);
  border-radius: 100px; padding: 0.2rem 0.6rem;
  font-size: 0.72rem; color: var(--muted2); font-weight: 600;
}

/* â”€â”€ FOOTER â”€â”€ */
footer {
  position: relative; z-index: 1;
  border-top: 1px solid var(--border);
  background: var(--surface); padding: 3rem 2rem 2rem;
  margin-top: 4rem;
}
.footer-inner {
  max-width: 1280px; margin: 0 auto;
  display: grid; grid-template-columns: 2fr 1fr 1fr 1fr;
  gap: 2.5rem; margin-bottom: 2.5rem;
}
.footer-brand .logo { font-size: 1.25rem; margin-bottom: 0.75rem; display: inline-block; }
.footer-brand p { font-size: 0.85rem; color: var(--muted); line-height: 1.7; max-width: 280px; }
footer h4 { font-size: 0.8rem; font-weight: 700; text-transform: uppercase; letter-spacing: 0.08em; color: var(--muted); margin-bottom: 1rem; }
footer ul { list-style: none; }
footer ul li { margin-bottom: 0.6rem; }
footer ul a { color: var(--muted2); text-decoration: none; font-size: 0.875rem; transition: color 0.2s; }
footer ul a:hover { color: var(--text); }
.footer-bottom {
  max-width: 1280px; margin: 0 auto;
  padding-top: 1.5rem; border-top: 1px solid var(--border);
  display: flex; justify-content: space-between; align-items: center;
  font-size: 0.8rem; color: var(--muted); flex-wrap: wrap; gap: 1rem;
}

/* â”€â”€ SEARCH HIGHLIGHT â”€â”€ */
.calc-card.hidden { display: none; }
.no-results {
  grid-column: 1/-1; text-align: center;
  padding: 3rem; color: var(--muted);
}
.no-results p { font-size: 1rem; margin-top: 0.5rem; }

/* â”€â”€ RESPONSIVE â”€â”€ */
@media (max-width: 900px) {
  .main-wrap { grid-template-columns: 1fr; }
  .sidebar-col { display: none; }
  .nav-cats { display: none; }
  .footer-inner { grid-template-columns: 1fr 1fr; }
}
@media (max-width: 600px) {
  .field-row, .field-row-3 { grid-template-columns: 1fr; }
  .hero h1 { font-size: 2.5rem; }
  .hero-stats { gap: 1.5rem; }
  .footer-inner { grid-template-columns: 1fr; }
}

/* â”€â”€ ANIMATIONS â”€â”€ */
@keyframes fadeUp {
  from { opacity: 0; transform: translateY(16px); }
  to { opacity: 1; transform: translateY(0); }
}
.calc-card { animation: fadeUp 0.4s ease both; }
.calc-card:nth-child(1) { animation-delay: 0.05s; }
.calc-card:nth-child(2) { animation-delay: 0.1s; }
.calc-card:nth-child(3) { animation-delay: 0.15s; }
.calc-card:nth-child(4) { animation-delay: 0.2s; }
.calc-card:nth-child(5) { animation-delay: 0.25s; }
.calc-card:nth-child(6) { animation-delay: 0.3s; }

/* â”€â”€ LANGUAGE TOGGLE â”€â”€ */
.lang-toggle {
  position: fixed; top: 50%; right: 0;
  transform: translateY(-50%);
  z-index: 9999;
  display: flex; flex-direction: column;
  border-radius: 12px 0 0 12px;
  overflow: hidden;
  box-shadow: -4px 0 24px rgba(0,0,0,0.4);
}
.lang-toggle a {
  display: flex; align-items: center; justify-content: center;
  width: 48px; height: 46px;
  text-decoration: none;
  font-size: 0.8rem; font-weight: 700;
  transition: all 0.2s; letter-spacing: 0.04em;
}
.lang-toggle a.lang-en {
  background: #6c63ff; color: white;
  border-bottom: 1px solid rgba(255,255,255,0.15);
}
.lang-toggle a.lang-en:hover { background: #8b84ff; }
.lang-toggle a.lang-ar {
  background: #1c1c27; color: #9090b8;
  font-family: 'Cairo', sans-serif;
}
.lang-toggle a.lang-ar:hover { background: #2a2a3d; color: #e8e8f0; }
.lang-toggle a::after {
  content: attr(data-tooltip);
  position: absolute; right: 56px;
  background: #1c1c27; border: 1px solid #363650;
  color: #e8e8f0; font-size: 0.75rem;
  padding: 0.3rem 0.7rem; border-radius: 6px;
  white-space: nowrap; opacity: 0; pointer-events: none;
  transition: opacity 0.2s;
}
.lang-toggle a:hover::after { opacity: 1; }
@media (max-width: 600px) {
  .lang-toggle { top: auto; bottom: 1.5rem; transform: none; }
}
</style>
</head>
<body>

<!-- â•â•â• LANGUAGE TOGGLE â•â•â• -->
<div class="lang-toggle">
  <a href="index.html"    class="lang-en" data-tooltip="English (current)">EN</a>
  <a href="index-ar.html" class="lang-ar" data-tooltip="Ø§Ù„Ø¹Ø±Ø¨ÙŠØ©" style="font-family:'Cairo',sans-serif;">Ø¹</a>
</div>

<nav>
  <div class="nav-inner">
    <a href="#" class="logo">Calc<span class="logo-dot">Wise</span></a>
    <div class="nav-search">
      <span style="color:var(--muted);font-size:0.9rem;">âŒ•</span>
      <input type="text" id="global-search" placeholder="Search calculatorsâ€¦" oninput="searchCalcs(this.value)">
    </div>
    <ul class="nav-cats">
      <li><button onclick="filterCat('all')" class="active" id="nav-all">All</button></li>
      <li><button onclick="filterCat('finance')" id="nav-finance">Finance</button></li>
      <li><button onclick="filterCat('health')" id="nav-health">Health</button></li>
      <li><button onclick="filterCat('math')" id="nav-math">Math</button></li>
      <li><button onclick="filterCat('everyday')" id="nav-everyday">Everyday</button></li>
    </ul>
  </div>
</nav>

<!-- HERO -->
<section class="hero">
  <div class="hero-glow"></div>
  <div class="hero-eyebrow"><span>âœ¦</span> Free Â· Instant Â· Private <span>âœ¦</span></div>
  <h1>Every Calculator<br>You'll Ever <em>Need</em></h1>
  <p>30+ free online calculators for finance, health, math, and everyday life. No ads blocking your results, no signup, no nonsense.</p>
  <div class="hero-stats">
    <div class="stat"><span class="stat-num">30+</span><span class="stat-label">Calculators</span></div>
    <div class="stat"><span class="stat-num">100%</span><span class="stat-label">Free Forever</span></div>
    <div class="stat"><span class="stat-num">0</span><span class="stat-label">Data Collected</span></div>
  </div>
</section>

<!-- TOP AD -->
<div class="ad-wrap">
  <div class="ad-unit leaderboard">Advertisement Â· 728Ã—90 â€” Replace with AdSense code</div>
</div>

<!-- MAIN CONTENT -->
<div class="main-wrap">
  <div class="main-content">

    <!-- CATEGORY TABS -->
    <div class="cat-tabs">
      <button class="cat-tab active" onclick="filterCat('all')" id="tab-all">
        <span class="tab-icon">âš¡</span> All Calculators
      </button>
      <button class="cat-tab" onclick="filterCat('finance')" id="tab-finance">
        <span class="tab-icon">ğŸ’°</span> Finance
      </button>
      <button class="cat-tab" onclick="filterCat('health')" id="tab-health">
        <span class="tab-icon">â¤ï¸</span> Health & Fitness
      </button>
      <button class="cat-tab" onclick="filterCat('math')" id="tab-math">
        <span class="tab-icon">ğŸ“</span> Math & Science
      </button>
      <button class="cat-tab" onclick="filterCat('everyday')" id="tab-everyday">
        <span class="tab-icon">ğŸŒŸ</span> Everyday
      </button>
    </div>

    <!-- FINANCE SECTION -->
    <div id="section-finance" class="calc-section">
      <div class="section-head">
        <h2>ğŸ’° Finance & Money</h2>
        <span class="section-badge">12 Calculators</span>
      </div>
      <div class="calc-grid" id="grid-finance">

        <div class="calc-card" style="--card-color:var(--green)" data-cat="finance" data-name="mortgage calculator" onclick="openCalc('mortgage')">
          <div class="card-icon">ğŸ </div>
          <h3>Mortgage Calculator</h3>
          <p>Monthly payments, total interest, and full amortization schedule.</p>
          <span class="card-tag" style="background:var(--green)">Popular</span>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="finance" data-name="loan calculator personal loan" onclick="openCalc('loan')">
          <div class="card-icon">ğŸ’³</div>
          <h3>Loan Calculator</h3>
          <p>Calculate monthly payments for any personal or auto loan.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--yellow)" data-cat="finance" data-name="compound interest savings investment" onclick="openCalc('compound')">
          <div class="card-icon">ğŸ“ˆ</div>
          <h3>Compound Interest</h3>
          <p>See how your savings or investments grow over time.</p>
          <span class="card-tag" style="background:var(--yellow);color:#000">Hot</span>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="finance" data-name="credit card payoff debt" onclick="openCalc('creditcard')">
          <div class="card-icon">ğŸ’³</div>
          <h3>Credit Card Payoff</h3>
          <p>Find out how long to pay off your balance and total interest paid.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="finance" data-name="salary hourly wage income" onclick="openCalc('salary')">
          <div class="card-icon">ğŸ’¼</div>
          <h3>Salary Calculator</h3>
          <p>Convert hourly, weekly, monthly and annual salary figures.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="finance" data-name="tip calculator restaurant bill" onclick="openCalc('tip')">
          <div class="card-icon">ğŸ½ï¸</div>
          <h3>Tip Calculator</h3>
          <p>Split a restaurant bill and calculate tip per person instantly.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--green)" data-cat="finance" data-name="ROI return on investment" onclick="openCalc('roi')">
          <div class="card-icon">ğŸ“Š</div>
          <h3>ROI Calculator</h3>
          <p>Calculate return on investment and profit percentage.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="finance" data-name="percentage discount sale price" onclick="openCalc('percentage')">
          <div class="card-icon">%</div>
          <h3>Percentage Calculator</h3>
          <p>What is X% of Y? Percentage change, increase, decrease.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--yellow)" data-cat="finance" data-name="tax income sales tax" onclick="openCalc('tax')">
          <div class="card-icon">ğŸ§¾</div>
          <h3>Sales Tax Calculator</h3>
          <p>Add or remove sales tax from any price instantly.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="finance" data-name="retirement savings 401k pension" onclick="openCalc('retirement')">
          <div class="card-icon">ğŸ–ï¸</div>
          <h3>Retirement Savings</h3>
          <p>How much you need to save monthly to retire comfortably.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="finance" data-name="currency exchange rate converter" onclick="openCalc('currency')">
          <div class="card-icon">ğŸ’±</div>
          <h3>Currency Converter</h3>
          <p>Convert between major world currencies with live-style rates.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="finance" data-name="inflation purchasing power" onclick="openCalc('inflation')">
          <div class="card-icon">ğŸ“‰</div>
          <h3>Inflation Calculator</h3>
          <p>See how inflation erodes purchasing power over time.</p>
        </div>

      </div>
    </div>

    <!-- MID AD -->
    <div class="ad-unit leaderboard" style="margin:2rem 0">Advertisement Â· 728Ã—90 â€” Replace with AdSense code</div>

    <!-- HEALTH SECTION -->
    <div id="section-health" class="calc-section">
      <div class="section-head">
        <h2>â¤ï¸ Health & Fitness</h2>
        <span class="section-badge">10 Calculators</span>
      </div>
      <div class="calc-grid" id="grid-health">

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="health" data-name="BMI body mass index weight" onclick="openCalc('bmi')">
          <div class="card-icon">âš–ï¸</div>
          <h3>BMI Calculator</h3>
          <p>Body mass index with healthy weight range and category.</p>
          <span class="card-tag" style="background:var(--pink)">Popular</span>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="health" data-name="calorie intake TDEE diet weight loss" onclick="openCalc('calories')">
          <div class="card-icon">ğŸ”¥</div>
          <h3>Calorie Calculator</h3>
          <p>Daily calorie needs based on your goal: lose, maintain, or gain.</p>
          <span class="card-tag" style="background:var(--orange)">Hot</span>
        </div>

        <div class="calc-card" style="--card-color:var(--green)" data-cat="health" data-name="protein macros macronutrients diet" onclick="openCalc('macros')">
          <div class="card-icon">ğŸ¥©</div>
          <h3>Macro Calculator</h3>
          <p>Protein, carb and fat targets for your fitness goal.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="health" data-name="body fat percentage lean mass" onclick="openCalc('bodyfat')">
          <div class="card-icon">ğŸ’ª</div>
          <h3>Body Fat Calculator</h3>
          <p>Estimate body fat percentage using measurements.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--yellow)" data-cat="health" data-name="running pace pace per mile km" onclick="openCalc('pace')">
          <div class="card-icon">ğŸƒ</div>
          <h3>Running Pace Calculator</h3>
          <p>Calculate pace, finish time, or distance for any run.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="health" data-name="water intake hydration drink" onclick="openCalc('water')">
          <div class="card-icon">ğŸ’§</div>
          <h3>Water Intake Calculator</h3>
          <p>Daily hydration needs based on weight and activity level.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="health" data-name="sleep hours age bedtime" onclick="openCalc('sleep')">
          <div class="card-icon">ğŸ˜´</div>
          <h3>Sleep Calculator</h3>
          <p>Find the best bedtime based on sleep cycles and wake time.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--green)" data-cat="health" data-name="pregnancy due date weeks" onclick="openCalc('pregnancy')">
          <div class="card-icon">ğŸ¤°</div>
          <h3>Pregnancy Due Date</h3>
          <p>Calculate expected due date from last menstrual period.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="health" data-name="heart rate max target zone cardio" onclick="openCalc('heartrate')">
          <div class="card-icon">â¤ï¸</div>
          <h3>Heart Rate Zones</h3>
          <p>Target heart rate zones for fat burn and cardio training.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="health" data-name="ideal weight healthy body frame" onclick="openCalc('idealweight')">
          <div class="card-icon">ğŸ¯</div>
          <h3>Ideal Weight Calculator</h3>
          <p>Estimate healthy weight range for your height and frame.</p>
        </div>

      </div>
    </div>

    <!-- MID AD 2 -->
    <div class="ad-unit leaderboard" style="margin:2rem 0">Advertisement Â· 728Ã—90 â€” Replace with AdSense code</div>

    <!-- MATH SECTION -->
    <div id="section-math" class="calc-section">
      <div class="section-head">
        <h2>ğŸ“ Math & Science</h2>
        <span class="section-badge">8 Calculators</span>
      </div>
      <div class="calc-grid" id="grid-math">

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="math" data-name="scientific calculator math" onclick="openCalc('scientific')">
          <div class="card-icon">ğŸ”¢</div>
          <h3>Scientific Calculator</h3>
          <p>Full scientific calculator with trig, log, and exponent functions.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="math" data-name="unit converter length weight volume temperature" onclick="openCalc('units')">
          <div class="card-icon">ğŸ“</div>
          <h3>Unit Converter</h3>
          <p>Length, weight, volume, temperature, speed and more.</p>
          <span class="card-tag">Popular</span>
        </div>

        <div class="calc-card" style="--card-color:var(--green)" data-cat="math" data-name="GPA grade point average college" onclick="openCalc('gpa')">
          <div class="card-icon">ğŸ“</div>
          <h3>GPA Calculator</h3>
          <p>Calculate cumulative GPA from course grades and credits.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--yellow)" data-cat="math" data-name="quadratic equation formula roots" onclick="openCalc('quadratic')">
          <div class="card-icon">ğŸ“Š</div>
          <h3>Quadratic Equation</h3>
          <p>Solve axÂ² + bx + c = 0 and find roots instantly.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="math" data-name="probability statistics combination permutation" onclick="openCalc('probability')">
          <div class="card-icon">ğŸ²</div>
          <h3>Probability Calculator</h3>
          <p>Combinations, permutations and event probabilities.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="math" data-name="area volume geometry shape" onclick="openCalc('geometry')">
          <div class="card-icon">ğŸ“</div>
          <h3>Geometry Calculator</h3>
          <p>Area, perimeter, and volume for circles, rectangles, triangles.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="math" data-name="speed distance time travel" onclick="openCalc('speed')">
          <div class="card-icon">âš¡</div>
          <h3>Speed Distance Time</h3>
          <p>Solve for speed, distance, or time given the other two values.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="math" data-name="number base binary hex decimal convert" onclick="openCalc('base')">
          <div class="card-icon">ğŸ’»</div>
          <h3>Number Base Converter</h3>
          <p>Convert between binary, octal, decimal, and hexadecimal.</p>
        </div>

      </div>
    </div>

    <!-- EVERYDAY SECTION -->
    <div id="section-everyday" class="calc-section">
      <div class="section-head" style="margin-top:2rem;">
        <h2>ğŸŒŸ Everyday Life</h2>
        <span class="section-badge">6 Calculators</span>
      </div>
      <div class="calc-grid" id="grid-everyday">

        <div class="calc-card" style="--card-color:var(--yellow)" data-cat="everyday" data-name="age birthday date born" onclick="openCalc('age')">
          <div class="card-icon">ğŸ‚</div>
          <h3>Age Calculator</h3>
          <p>Calculate exact age in years, months, and days from birthdate.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--green)" data-cat="everyday" data-name="date difference days between dates" onclick="openCalc('datediff')">
          <div class="card-icon">ğŸ“…</div>
          <h3>Date Difference</h3>
          <p>Number of days, weeks, and months between two dates.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--pink)" data-cat="everyday" data-name="time zone converter world clock" onclick="openCalc('timezone')">
          <div class="card-icon">ğŸŒ</div>
          <h3>Time Zone Converter</h3>
          <p>Convert time between major world time zones instantly.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--orange)" data-cat="everyday" data-name="fuel gas mileage mpg cost trip" onclick="openCalc('fuel')">
          <div class="card-icon">â›½</div>
          <h3>Fuel Cost Calculator</h3>
          <p>Estimate trip fuel cost based on distance, mpg and gas price.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--blue)" data-cat="everyday" data-name="cooking measurement recipe scale" onclick="openCalc('cooking')">
          <div class="card-icon">ğŸ‘¨â€ğŸ³</div>
          <h3>Cooking Converter</h3>
          <p>Convert cups, tablespoons, teaspoons, ml, and ounces.</p>
        </div>

        <div class="calc-card" style="--card-color:var(--accent)" data-cat="everyday" data-name="random number generator dice" onclick="openCalc('random')">
          <div class="card-icon">ğŸ²</div>
          <h3>Random Number Generator</h3>
          <p>Generate random numbers within any range you specify.</p>
        </div>

      </div>
    </div>

    <!-- NO RESULTS -->
    <div id="no-results" class="no-results" style="display:none;">
      <div style="font-size:3rem;margin-bottom:0.5rem;">ğŸ”</div>
      <p>No calculators found for "<span id="no-results-term"></span>"</p>
    </div>

  </div>

  <!-- SIDEBAR -->
  <div class="sidebar-col">
    <div class="ad-unit sidebar">Ad Â· 160Ã—600</div>
  </div>
</div>

<!-- FOOTER -->
<footer>
  <div class="footer-inner">
    <div class="footer-brand">
      <a href="#" class="logo">Calc<span class="logo-dot">Wise</span></a>
      <p>Free online calculators for finance, health, math, and everyday decisions. All calculations happen in your browser â€” we never store your data.</p>
    </div>
    <div>
      <h4>Finance</h4>
      <ul>
        <li><a href="#" onclick="openCalc('mortgage')">Mortgage</a></li>
        <li><a href="#" onclick="openCalc('loan')">Loan Payment</a></li>
        <li><a href="#" onclick="openCalc('compound')">Compound Interest</a></li>
        <li><a href="#" onclick="openCalc('tip')">Tip Calculator</a></li>
        <li><a href="#" onclick="openCalc('percentage')">Percentage</a></li>
      </ul>
    </div>
    <div>
      <h4>Health</h4>
      <ul>
        <li><a href="#" onclick="openCalc('bmi')">BMI</a></li>
        <li><a href="#" onclick="openCalc('calories')">Calories</a></li>
        <li><a href="#" onclick="openCalc('macros')">Macros</a></li>
        <li><a href="#" onclick="openCalc('bodyfat')">Body Fat</a></li>
        <li><a href="#" onclick="openCalc('pace')">Running Pace</a></li>
      </ul>
    </div>
    <div>
      <h4>Company</h4>
      <ul>
        <li><a href="#">Privacy Policy</a></li>
        <li><a href="#">Terms of Use</a></li>
        <li><a href="#">About</a></li>
        <li><a href="#">Contact</a></li>
      </ul>
    </div>
  </div>
  <div class="footer-bottom">
    <span>Â© 2025 CalcWise. Free calculators for everyone.</span>
    <span>Results are for informational purposes only.</span>
  </div>
</footer>

<!-- MODAL -->
<div class="modal-overlay" id="modal-overlay" onclick="closeModalOutside(event)">
  <div class="modal" id="modal">
    <div class="modal-header">
      <div class="modal-icon" id="modal-icon">ğŸ”¢</div>
      <div>
        <h2 id="modal-title">Calculator</h2>
        <p id="modal-desc">Calculate your result instantly.</p>
      </div>
      <button class="modal-close" onclick="closeModal()">âœ•</button>
    </div>
    <div class="modal-body" id="modal-body">
      <!-- injected per calculator -->
    </div>
  </div>
</div>

<script>
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  SEARCH & FILTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function searchCalcs(q) {
  q = q.toLowerCase().trim();
  const cards = document.querySelectorAll('.calc-card');
  const sections = document.querySelectorAll('.calc-section');
  let anyVisible = false;
  cards.forEach(c => {
    const name = c.dataset.name || '';
    const title = c.querySelector('h3').textContent.toLowerCase();
    const match = !q || name.includes(q) || title.includes(q);
    c.classList.toggle('hidden', !match);
    if (match) anyVisible = true;
  });
  sections.forEach(s => {
    const visible = s.querySelectorAll('.calc-card:not(.hidden)').length > 0;
    s.style.display = (q && !visible) ? 'none' : '';
  });
  const noR = document.getElementById('no-results');
  noR.style.display = (q && !anyVisible) ? 'block' : 'none';
  if (!anyVisible && q) document.getElementById('no-results-term').textContent = q;
}

function filterCat(cat) {
  // update tabs
  document.querySelectorAll('.cat-tab').forEach(t => t.classList.remove('active'));
  document.querySelectorAll('.nav-cats button').forEach(b => b.classList.remove('active'));
  const tab = document.getElementById('tab-' + cat);
  const navBtn = document.getElementById('nav-' + cat);
  if (tab) tab.classList.add('active');
  if (navBtn) navBtn.classList.add('active');

  const cards = document.querySelectorAll('.calc-card');
  const sections = document.querySelectorAll('.calc-section');
  cards.forEach(c => c.classList.toggle('hidden', cat !== 'all' && c.dataset.cat !== cat));
  sections.forEach(s => {
    if (cat === 'all') { s.style.display = ''; return; }
    const id = s.id.replace('section-', '');
    s.style.display = id === cat ? '' : 'none';
  });
  // clear search
  document.getElementById('global-search').value = '';
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  MODAL
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const calculators = {
  mortgage: {
    icon: 'ğŸ ', title: 'Mortgage Calculator',
    desc: 'Estimate monthly payments, total interest paid, and loan cost.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Home Price</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="m-price" value="350000" min="0"></div></div>
        <div class="field-group"><label>Down Payment</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="m-down" value="70000" min="0"></div></div>
      </div>
      <div class="field-row">
        <div class="field-group"><label>Interest Rate</label><div class="input-wrap has-suffix"><input type="number" id="m-rate" value="6.8" step="0.1" min="0"><span class="input-suffix">%</span></div></div>
        <div class="field-group"><label>Loan Term</label><select id="m-term"><option value="30">30 Years</option><option value="20">20 Years</option><option value="15">15 Years</option><option value="10">10 Years</option></select></div>
      </div>
      <button class="calc-btn" onclick="calcMortgage()">Calculate Payment</button>
      <div class="results" id="r-mortgage">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-m-monthly">$0</span><div class="result-label">Monthly Payment</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-m-total">$0</span><div class="result-label">Total Payment</div></div>
          <div class="result-item"><span class="result-value" id="r-m-interest">$0</span><div class="result-label">Total Interest</div></div>
          <div class="result-item"><span class="result-value" id="r-m-loan">$0</span><div class="result-label">Loan Amount</div></div>
        </div>
        <div class="result-bar" id="r-m-bar"></div>
        <p class="result-note">This estimate covers principal and interest only. Add property tax (~1.2%), homeowners insurance (~$150/mo), and PMI if down payment is less than 20%.</p>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  loan: {
    icon: 'ğŸ’³', title: 'Loan Calculator',
    desc: 'Monthly payments and total cost for any personal or auto loan.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Loan Amount</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="l-amount" value="15000" min="0"></div></div>
        <div class="field-group"><label>Annual Interest Rate</label><div class="input-wrap has-suffix"><input type="number" id="l-rate" value="8.5" step="0.1" min="0"><span class="input-suffix">%</span></div></div>
      </div>
      <div class="field-group"><label>Loan Term</label>
        <select id="l-term">
          <option value="12">1 Year</option><option value="24">2 Years</option>
          <option value="36">3 Years</option><option value="48">4 Years</option>
          <option value="60" selected>5 Years</option><option value="72">6 Years</option>
          <option value="84">7 Years</option>
        </select>
      </div>
      <button class="calc-btn" onclick="calcLoan()">Calculate</button>
      <div class="results" id="r-loan">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-l-monthly">$0</span><div class="result-label">Monthly Payment</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-l-total">$0</span><div class="result-label">Total Repaid</div></div>
          <div class="result-item"><span class="result-value" id="r-l-interest">$0</span><div class="result-label">Total Interest</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  compound: {
    icon: 'ğŸ“ˆ', title: 'Compound Interest Calculator',
    desc: 'Watch your savings grow with the power of compounding.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Principal Amount</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="ci-principal" value="10000" min="0"></div></div>
        <div class="field-group"><label>Annual Interest Rate</label><div class="input-wrap has-suffix"><input type="number" id="ci-rate" value="7" step="0.1" min="0"><span class="input-suffix">%</span></div></div>
      </div>
      <div class="field-row">
        <div class="field-group"><label>Time Period (Years)</label><input type="number" id="ci-years" value="10" min="1"></div>
        <div class="field-group"><label>Compound Frequency</label>
          <select id="ci-freq">
            <option value="1">Annually</option><option value="4">Quarterly</option>
            <option value="12" selected>Monthly</option><option value="365">Daily</option>
          </select>
        </div>
      </div>
      <div class="field-group"><label>Monthly Contribution</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="ci-contrib" value="200" min="0"></div></div>
      <button class="calc-btn" onclick="calcCompound()">Calculate Growth</button>
      <div class="results" id="r-compound">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-ci-final">$0</span><div class="result-label">Final Balance</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-ci-contributed">$0</span><div class="result-label">Total Contributed</div></div>
          <div class="result-item"><span class="result-value" id="r-ci-earned">$0</span><div class="result-label">Interest Earned</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  tip: {
    icon: 'ğŸ½ï¸', title: 'Tip Calculator',
    desc: 'Split a bill and calculate tip per person.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Bill Amount</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="t-bill" value="85.50" step="0.01" min="0"></div></div>
        <div class="field-group"><label>Tip Percentage</label><div class="input-wrap has-suffix"><input type="number" id="t-tip" value="18" min="0"><span class="input-suffix">%</span></div></div>
      </div>
      <div class="field-group"><label>Number of People</label><input type="number" id="t-people" value="4" min="1"></div>
      <div style="display:flex;gap:0.5rem;margin-bottom:1rem;flex-wrap:wrap;">
        <button onclick="document.getElementById('t-tip').value=10;calcTip()" style="flex:1;padding:0.5rem;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.85rem;">10%</button>
        <button onclick="document.getElementById('t-tip').value=15;calcTip()" style="flex:1;padding:0.5rem;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.85rem;">15%</button>
        <button onclick="document.getElementById('t-tip').value=18;calcTip()" style="flex:1;padding:0.5rem;background:var(--accent);border:none;border-radius:8px;color:white;cursor:pointer;font-family:inherit;font-size:0.85rem;font-weight:600;">18%</button>
        <button onclick="document.getElementById('t-tip').value=20;calcTip()" style="flex:1;padding:0.5rem;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.85rem;">20%</button>
        <button onclick="document.getElementById('t-tip').value=25;calcTip()" style="flex:1;padding:0.5rem;background:var(--surface2);border:1px solid var(--border);border-radius:8px;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.85rem;">25%</button>
      </div>
      <button class="calc-btn" onclick="calcTip()">Calculate</button>
      <div class="results" id="r-tip">
        <h3>Results</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-t-tip">$0</span><div class="result-label">Tip Amount</div></div>
          <div class="result-item"><span class="result-value" id="r-t-total">$0</span><div class="result-label">Total Bill</div></div>
          <div class="result-item"><span class="result-value" id="r-t-per">$0</span><div class="result-label">Per Person</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  bmi: {
    icon: 'âš–ï¸', title: 'BMI Calculator',
    desc: 'Body Mass Index with healthy weight range and category.',
    html: `
      <div class="field-group"><label>Unit System</label>
        <select id="bmi-unit" onchange="updateBmiFields()">
          <option value="imperial">Imperial (lbs, inches)</option>
          <option value="metric">Metric (kg, cm)</option>
        </select>
      </div>
      <div class="field-row" id="bmi-imperial-fields">
        <div class="field-group"><label>Weight</label><div class="input-wrap has-suffix"><input type="number" id="bmi-lbs" value="165" min="0"><span class="input-suffix">lbs</span></div></div>
        <div class="field-group"><label>Height</label><div class="input-wrap has-suffix"><input type="number" id="bmi-inches" value="68" min="0"><span class="input-suffix">in</span></div></div>
      </div>
      <div class="field-row" id="bmi-metric-fields" style="display:none">
        <div class="field-group"><label>Weight</label><div class="input-wrap has-suffix"><input type="number" id="bmi-kg" value="75" min="0"><span class="input-suffix">kg</span></div></div>
        <div class="field-group"><label>Height</label><div class="input-wrap has-suffix"><input type="number" id="bmi-cm" value="173" min="0"><span class="input-suffix">cm</span></div></div>
      </div>
      <button class="calc-btn" onclick="calcBMI()">Calculate BMI</button>
      <div class="results" id="r-bmi">
        <h3>Results</h3>
        <div class="result-highlight">
          <span class="result-value" id="r-bmi-val">0</span>
          <div class="result-label">BMI Score</div>
          <div id="r-bmi-cat" style="margin-top:0.5rem;font-weight:700;font-size:1.1rem;"></div>
        </div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-bmi-low">0</span><div class="result-label">Healthy Min (lbs)</div></div>
          <div class="result-item"><span class="result-value" id="r-bmi-high">0</span><div class="result-label">Healthy Max (lbs)</div></div>
        </div>
        <p class="result-note">BMI is a screening tool, not a diagnostic measure. Athletes and muscular individuals may have elevated BMI despite healthy body composition.</p>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  calories: {
    icon: 'ğŸ”¥', title: 'Calorie Calculator',
    desc: 'Daily calorie needs based on your body and goal.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Age</label><div class="input-wrap has-suffix"><input type="number" id="cal-age" value="30" min="1" max="120"><span class="input-suffix">yrs</span></div></div>
        <div class="field-group"><label>Sex</label><select id="cal-sex"><option value="male">Male</option><option value="female">Female</option></select></div>
      </div>
      <div class="field-row">
        <div class="field-group"><label>Weight</label><div class="input-wrap has-suffix"><input type="number" id="cal-weight" value="165" min="0"><span class="input-suffix">lbs</span></div></div>
        <div class="field-group"><label>Height</label><div class="input-wrap has-suffix"><input type="number" id="cal-height" value="68" min="0"><span class="input-suffix">in</span></div></div>
      </div>
      <div class="field-group"><label>Activity Level</label>
        <select id="cal-activity">
          <option value="1.2">Sedentary (little or no exercise)</option>
          <option value="1.375">Light (1â€“3 days/week)</option>
          <option value="1.55" selected>Moderate (3â€“5 days/week)</option>
          <option value="1.725">Active (6â€“7 days/week)</option>
          <option value="1.9">Very Active (physical job or 2Ã— training)</option>
        </select>
      </div>
      <div class="field-group"><label>Goal</label>
        <select id="cal-goal">
          <option value="-500">Lose Weight (âˆ’500 cal/day)</option>
          <option value="0" selected>Maintain Weight</option>
          <option value="500">Gain Weight (+500 cal/day)</option>
        </select>
      </div>
      <button class="calc-btn" onclick="calcCalories()">Calculate</button>
      <div class="results" id="r-calories">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-cal-target">0</span><div class="result-label">Daily Calorie Target</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-cal-bmr">0</span><div class="result-label">BMR (base rate)</div></div>
          <div class="result-item"><span class="result-value" id="r-cal-tdee">0</span><div class="result-label">TDEE (maintenance)</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  macros: {
    icon: 'ğŸ¥©', title: 'Macro Calculator',
    desc: 'Protein, carb and fat targets for your fitness goal.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Daily Calories</label><input type="number" id="mac-cal" value="2200" min="0"></div>
        <div class="field-group"><label>Goal</label>
          <select id="mac-goal">
            <option value="cut">Cut (high protein)</option>
            <option value="maintain" selected>Maintain (balanced)</option>
            <option value="bulk">Bulk (higher carbs)</option>
          </select>
        </div>
      </div>
      <button class="calc-btn" onclick="calcMacros()">Calculate Macros</button>
      <div class="results" id="r-macros">
        <h3>Results</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-mac-protein" style="color:var(--pink)">0g</span><div class="result-label">Protein</div></div>
          <div class="result-item"><span class="result-value" id="r-mac-carbs" style="color:var(--yellow)">0g</span><div class="result-label">Carbohydrates</div></div>
          <div class="result-item"><span class="result-value" id="r-mac-fat" style="color:var(--orange)">0g</span><div class="result-label">Fats</div></div>
        </div>
        <div class="result-bar" id="r-mac-bar"></div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  salary: {
    icon: 'ğŸ’¼', title: 'Salary Calculator',
    desc: 'Convert between hourly, daily, weekly, monthly, and annual salary.',
    html: `
      <div class="field-group"><label>Enter Your Salary</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="sal-amount" value="75000" min="0"></div></div>
      <div class="field-row">
        <div class="field-group"><label>Pay Period</label>
          <select id="sal-period">
            <option value="hour">Per Hour</option>
            <option value="day">Per Day</option>
            <option value="week">Per Week</option>
            <option value="month">Per Month</option>
            <option value="year" selected>Per Year</option>
          </select>
        </div>
        <div class="field-group"><label>Hours per Week</label><input type="number" id="sal-hours" value="40" min="1"></div>
      </div>
      <button class="calc-btn" onclick="calcSalary()">Convert</button>
      <div class="results" id="r-salary">
        <h3>All Pay Periods</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-sal-hour">$0</span><div class="result-label">Per Hour</div></div>
          <div class="result-item"><span class="result-value" id="r-sal-day">$0</span><div class="result-label">Per Day</div></div>
          <div class="result-item"><span class="result-value" id="r-sal-week">$0</span><div class="result-label">Per Week</div></div>
          <div class="result-item"><span class="result-value" id="r-sal-month">$0</span><div class="result-label">Per Month</div></div>
          <div class="result-item"><span class="result-value" id="r-sal-year">$0</span><div class="result-label">Per Year</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  percentage: {
    icon: '%', title: 'Percentage Calculator',
    desc: 'Three ways to calculate percentages instantly.',
    html: `
      <div style="margin-bottom:1.5rem;">
        <div style="font-size:0.8rem;color:var(--muted2);font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.75rem;">What is X% of Y?</div>
        <div class="field-row">
          <div class="field-group"><input type="number" id="p1-x" value="15" placeholder="X%"> </div>
          <div class="field-group"><div class="input-wrap has-prefix"><span class="input-prefix">%</span><input type="number" id="p1-y" value="200" placeholder="of Y"></div></div>
        </div>
        <button onclick="calcPct1()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.5rem 1.25rem;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.9rem;">= <span id="r-p1" style="color:var(--accent2);font-weight:700;">30</span></button>
      </div>
      <div style="margin-bottom:1.5rem;">
        <div style="font-size:0.8rem;color:var(--muted2);font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.75rem;">X is what % of Y?</div>
        <div class="field-row">
          <div class="field-group"><input type="number" id="p2-x" value="30" placeholder="X"></div>
          <div class="field-group"><input type="number" id="p2-y" value="200" placeholder="Y"></div>
        </div>
        <button onclick="calcPct2()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.5rem 1.25rem;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.9rem;">= <span id="r-p2" style="color:var(--accent2);font-weight:700;">15%</span></button>
      </div>
      <div>
        <div style="font-size:0.8rem;color:var(--muted2);font-weight:600;text-transform:uppercase;letter-spacing:0.05em;margin-bottom:0.75rem;">Percentage Change from X to Y</div>
        <div class="field-row">
          <div class="field-group"><input type="number" id="p3-x" value="80" placeholder="From"></div>
          <div class="field-group"><input type="number" id="p3-y" value="100" placeholder="To"></div>
        </div>
        <button onclick="calcPct3()" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.5rem 1.25rem;color:var(--text);cursor:pointer;font-family:inherit;font-size:0.9rem;">= <span id="r-p3" style="color:var(--green);font-weight:700;">+25%</span></button>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  age: {
    icon: 'ğŸ‚', title: 'Age Calculator',
    desc: 'Exact age in years, months, and days from your birthdate.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Date of Birth</label><input type="date" id="age-dob" style="width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.7rem;font-family:inherit;font-size:0.95rem;color:var(--text);outline:none;"></div>
        <div class="field-group"><label>As of Date</label><input type="date" id="age-today" style="width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.7rem;font-family:inherit;font-size:0.95rem;color:var(--text);outline:none;"></div>
      </div>
      <button class="calc-btn" onclick="calcAge()">Calculate Age</button>
      <div class="results" id="r-age">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-age-years">0</span><div class="result-label">Years Old</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-age-months">0</span><div class="result-label">Total Months</div></div>
          <div class="result-item"><span class="result-value" id="r-age-days">0</span><div class="result-label">Total Days</div></div>
          <div class="result-item"><span class="result-value" id="r-age-next">0</span><div class="result-label">Days to Birthday</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  gpa: {
    icon: 'ğŸ“', title: 'GPA Calculator',
    desc: 'Calculate your GPA from course grades and credit hours.',
    html: `
      <div id="gpa-courses">
        <div style="display:grid;grid-template-columns:1fr 100px 80px;gap:0.5rem;margin-bottom:0.5rem;">
          <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.05em;">Course</div>
          <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.05em;">Grade</div>
          <div style="font-size:0.75rem;color:var(--muted);text-transform:uppercase;letter-spacing:0.05em;">Credits</div>
        </div>
        <div id="gpa-rows"></div>
      </div>
      <button onclick="addGpaRow()" style="background:none;border:1px dashed var(--border2);border-radius:8px;padding:0.5rem 1rem;color:var(--muted2);cursor:pointer;font-family:inherit;font-size:0.85rem;width:100%;margin-bottom:1rem;">+ Add Course</button>
      <button class="calc-btn" onclick="calcGPA()">Calculate GPA</button>
      <div class="results" id="r-gpa">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-gpa-val">0.00</span><div class="result-label">GPA (4.0 Scale)</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-gpa-credits">0</span><div class="result-label">Total Credits</div></div>
          <div class="result-item"><span class="result-value" id="r-gpa-letter">â€”</span><div class="result-label">Letter Grade</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  fuel: {
    icon: 'â›½', title: 'Fuel Cost Calculator',
    desc: 'How much will your road trip cost in gas?',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Trip Distance</label><div class="input-wrap has-suffix"><input type="number" id="fuel-dist" value="300" min="0"><span class="input-suffix">mi</span></div></div>
        <div class="field-group"><label>Fuel Efficiency</label><div class="input-wrap has-suffix"><input type="number" id="fuel-mpg" value="32" min="0"><span class="input-suffix">mpg</span></div></div>
      </div>
      <div class="field-group"><label>Gas Price per Gallon</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="fuel-price" value="3.89" step="0.01" min="0"></div></div>
      <button class="calc-btn" onclick="calcFuel()">Calculate Cost</button>
      <div class="results" id="r-fuel">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-fuel-cost">$0</span><div class="result-label">Total Fuel Cost</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-fuel-gallons">0</span><div class="result-label">Gallons Needed</div></div>
          <div class="result-item"><span class="result-value" id="r-fuel-per100">$0</span><div class="result-label">Cost per 100 miles</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  roi: {
    icon: 'ğŸ“Š', title: 'ROI Calculator',
    desc: 'Calculate return on investment and profit percentage.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Initial Investment</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="roi-invest" value="10000" min="0"></div></div>
        <div class="field-group"><label>Final Value</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="roi-final" value="13500" min="0"></div></div>
      </div>
      <div class="field-group"><label>Time Period (Years, optional)</label><input type="number" id="roi-years" value="3" min="0"></div>
      <button class="calc-btn" onclick="calcROI()">Calculate ROI</button>
      <div class="results" id="r-roi">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-roi-pct">0%</span><div class="result-label">Total ROI</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-roi-profit">$0</span><div class="result-label">Net Profit</div></div>
          <div class="result-item"><span class="result-value" id="r-roi-annual">0%</span><div class="result-label">Annual ROI</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  scientific: {
    icon: 'ğŸ”¢', title: 'Scientific Calculator',
    desc: 'Full scientific calculator with trig and log functions.',
    html: `
      <div style="background:var(--surface2);border:1px solid var(--border);border-radius:10px;padding:1rem;margin-bottom:1rem;">
        <div id="sci-display" style="font-family:'Instrument Serif',serif;font-size:2rem;text-align:right;color:var(--accent2);min-height:2.5rem;letter-spacing:-0.02em;word-break:break-all;">0</div>
        <div id="sci-expr" style="font-size:0.8rem;color:var(--muted);text-align:right;min-height:1rem;margin-top:0.25rem;"></div>
      </div>
      <div style="display:grid;grid-template-columns:repeat(5,1fr);gap:0.4rem;">
        ${[['sin','cos','tan','log','ln'],
           ['(',')','Ï€','e','âˆš'],
           ['7','8','9','Ã·','xÂ²'],
           ['4','5','6','Ã—','^'],
           ['1','2','3','-','1/x'],
           ['Â±','0','.','+',' '],
           ['C','CE','âŒ«','=','']].map(row =>
          row.map(k => k ? `<button onclick="sciKey('${k}')" style="padding:0.6rem 0;background:${['='].includes(k)?'var(--accent)':['C','CE','âŒ«'].includes(k)?'var(--surface)':'var(--surface2)'};border:1px solid var(--border);border-radius:8px;color:${['='].includes(k)?'white':'var(--text)'};cursor:pointer;font-family:inherit;font-size:${['sin','cos','tan','log','ln','1/x'].includes(k)?'0.75':'0.9'}rem;font-weight:${['=','+','-','Ã—','Ã·'].includes(k)?600:400};transition:background 0.1s;" onmousedown="this.style.background='var(--border2)'" onmouseup="this.style.background='${['='].includes(k)?'var(--accent)':'var(--surface2)'}'">${k}</button>` : '<div></div>'
          ).join('')
        ).join('')}
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  units: {
    icon: 'ğŸ“', title: 'Unit Converter',
    desc: 'Convert between units of length, weight, temperature, and more.',
    html: `
      <div class="field-group"><label>Category</label>
        <select id="unit-cat" onchange="updateUnitOptions()">
          <option value="length">Length</option>
          <option value="weight">Weight / Mass</option>
          <option value="temp">Temperature</option>
          <option value="volume">Volume</option>
          <option value="speed">Speed</option>
        </select>
      </div>
      <div class="field-row">
        <div class="field-group"><label>From</label><select id="unit-from"></select></div>
        <div class="field-group"><label>To</label><select id="unit-to"></select></div>
      </div>
      <div class="field-group"><label>Value</label><input type="number" id="unit-val" value="1" oninput="calcUnits()"></div>
      <div class="results show" id="r-units">
        <div class="result-highlight"><span class="result-value" id="r-unit-result">0</span><div class="result-label" id="r-unit-label">Result</div></div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  creditcard: {
    icon: 'ğŸ’³', title: 'Credit Card Payoff Calculator',
    desc: 'See how long it takes to pay off your balance and total interest cost.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Current Balance</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="cc-balance" value="5000" min="0"></div></div>
        <div class="field-group"><label>APR</label><div class="input-wrap has-suffix"><input type="number" id="cc-apr" value="21.5" step="0.1" min="0"><span class="input-suffix">%</span></div></div>
      </div>
      <div class="field-group"><label>Monthly Payment</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="cc-payment" value="200" min="0"></div></div>
      <button class="calc-btn" onclick="calcCreditCard()">Calculate Payoff</button>
      <div class="results" id="r-cc">
        <h3>Results</h3>
        <div class="result-highlight"><span class="result-value" id="r-cc-months">0 months</span><div class="result-label">Time to Pay Off</div></div>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-cc-interest">$0</span><div class="result-label">Total Interest Paid</div></div>
          <div class="result-item"><span class="result-value" id="r-cc-total">$0</span><div class="result-label">Total Paid</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  water: {
    icon: 'ğŸ’§', title: 'Water Intake Calculator',
    desc: 'How much water should you drink each day?',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Weight</label><div class="input-wrap has-suffix"><input type="number" id="wat-weight" value="165" min="0"><span class="input-suffix">lbs</span></div></div>
        <div class="field-group"><label>Activity Level</label>
          <select id="wat-activity">
            <option value="1">Sedentary</option>
            <option value="1.2" selected>Moderate</option>
            <option value="1.4">Very Active</option>
          </select>
        </div>
      </div>
      <button class="calc-btn" onclick="calcWater()">Calculate</button>
      <div class="results" id="r-water">
        <h3>Daily Water Intake</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-wat-oz">0 oz</span><div class="result-label">Fluid Ounces</div></div>
          <div class="result-item"><span class="result-value" id="r-wat-cups">0</span><div class="result-label">Cups</div></div>
          <div class="result-item"><span class="result-value" id="r-wat-liters">0 L</span><div class="result-label">Liters</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  datediff: {
    icon: 'ğŸ“…', title: 'Date Difference Calculator',
    desc: 'Number of days, weeks, and months between two dates.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Start Date</label><input type="date" id="dd-start" style="width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.7rem;font-family:inherit;font-size:0.95rem;color:var(--text);outline:none;"></div>
        <div class="field-group"><label>End Date</label><input type="date" id="dd-end" style="width:100%;background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.7rem;font-family:inherit;font-size:0.95rem;color:var(--text);outline:none;"></div>
      </div>
      <button class="calc-btn" onclick="calcDateDiff()">Calculate Difference</button>
      <div class="results" id="r-datediff">
        <h3>Results</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-dd-days">0</span><div class="result-label">Days</div></div>
          <div class="result-item"><span class="result-value" id="r-dd-weeks">0</span><div class="result-label">Weeks</div></div>
          <div class="result-item"><span class="result-value" id="r-dd-months">0</span><div class="result-label">Months</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  pace: {
    icon: 'ğŸƒ', title: 'Running Pace Calculator',
    desc: 'Calculate pace, finish time, or distance for any run.',
    html: `
      <div class="field-group"><label>Solve For</label>
        <select id="pace-solve" onchange="updatePaceFields()">
          <option value="pace">Pace (given distance + time)</option>
          <option value="time">Finish Time (given distance + pace)</option>
          <option value="distance">Distance (given time + pace)</option>
        </select>
      </div>
      <div class="field-row" id="pace-dist-field">
        <div class="field-group"><label>Distance</label><div class="input-wrap has-suffix"><input type="number" id="pace-dist" value="5" min="0" step="0.1"><span class="input-suffix">km</span></div></div>
        <div class="field-group"><label>Unit</label><select id="pace-unit"><option value="km">Kilometers</option><option value="mi">Miles</option></select></div>
      </div>
      <div class="field-row" id="pace-time-field">
        <div class="field-group"><label>Hours</label><input type="number" id="pace-h" value="0" min="0"></div>
        <div class="field-group"><label>Minutes</label><input type="number" id="pace-m" value="28" min="0"></div>
        <div class="field-group"><label>Seconds</label><input type="number" id="pace-s" value="0" min="0"></div>
      </div>
      <div class="field-group" id="pace-pace-field" style="display:none">
        <label>Pace (min per km)</label>
        <div class="field-row">
          <input type="number" id="pace-min" value="5" min="0">
          <input type="number" id="pace-sec" value="30" min="0" max="59">
        </div>
      </div>
      <button class="calc-btn" onclick="calcPace()">Calculate</button>
      <div class="results" id="r-pace">
        <h3>Result</h3>
        <div class="result-highlight"><span class="result-value" id="r-pace-result">â€”</span><div class="result-label" id="r-pace-label">Pace</div></div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  random: {
    icon: 'ğŸ²', title: 'Random Number Generator',
    desc: 'Generate random numbers within any range.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Minimum</label><input type="number" id="rng-min" value="1"></div>
        <div class="field-group"><label>Maximum</label><input type="number" id="rng-max" value="100"></div>
      </div>
      <div class="field-group"><label>How Many Numbers?</label><input type="number" id="rng-count" value="1" min="1" max="50"></div>
      <button class="calc-btn" onclick="calcRandom()">ğŸ² Generate</button>
      <div class="results" id="r-random">
        <h3>Results</h3>
        <div id="r-rng-numbers" style="font-family:'Instrument Serif',serif;font-size:2rem;color:var(--accent2);text-align:center;letter-spacing:0.1em;line-height:1.6;"></div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  },

  tax: {
    icon: 'ğŸ§¾', title: 'Sales Tax Calculator',
    desc: 'Add or remove sales tax from any price.',
    html: `
      <div class="field-row">
        <div class="field-group"><label>Price</label><div class="input-wrap has-prefix"><span class="input-prefix">$</span><input type="number" id="stax-price" value="100" step="0.01" min="0"></div></div>
        <div class="field-group"><label>Tax Rate</label><div class="input-wrap has-suffix"><input type="number" id="stax-rate" value="8.5" step="0.1" min="0"><span class="input-suffix">%</span></div></div>
      </div>
      <div class="field-group"><label>Mode</label>
        <select id="stax-mode">
          <option value="add">Add tax to price</option>
          <option value="remove">Remove tax from price (reverse)</option>
        </select>
      </div>
      <button class="calc-btn" onclick="calcTax()">Calculate</button>
      <div class="results" id="r-tax">
        <h3>Results</h3>
        <div class="result-grid">
          <div class="result-item"><span class="result-value" id="r-tax-pre">$0</span><div class="result-label">Pre-Tax Price</div></div>
          <div class="result-item"><span class="result-value" id="r-tax-amount">$0</span><div class="result-label">Tax Amount</div></div>
          <div class="result-item"><span class="result-value" id="r-tax-total">$0</span><div class="result-label">Total Price</div></div>
        </div>
      </div>
      <div class="modal-ad">Advertisement Â· 728Ã—90</div>`
  }
};

// â”€â”€ OPEN/CLOSE MODAL â”€â”€
function openCalc(id) {
  const c = calculators[id];
  if (!c) {
    alert(`The ${id} calculator is coming soon!`);
    return;
  }
  document.getElementById('modal-icon').textContent = c.icon;
  document.getElementById('modal-title').textContent = c.title;
  document.getElementById('modal-desc').textContent = c.desc;
  document.getElementById('modal-body').innerHTML = c.html;
  document.getElementById('modal-overlay').classList.add('open');
  document.body.style.overflow = 'hidden';

  // Post-inject setup
  if (id === 'age') {
    const today = new Date().toISOString().split('T')[0];
    document.getElementById('age-today').value = today;
    const dob = new Date(); dob.setFullYear(dob.getFullYear() - 30);
    document.getElementById('age-dob').value = dob.toISOString().split('T')[0];
  }
  if (id === 'datediff') {
    const t = new Date();
    document.getElementById('dd-end').value = t.toISOString().split('T')[0];
    t.setMonth(t.getMonth() - 3);
    document.getElementById('dd-start').value = t.toISOString().split('T')[0];
  }
  if (id === 'gpa') { initGPA(); }
  if (id === 'units') { updateUnitOptions(); }
  if (id === 'scientific') { sciExpr = ''; sciDisplay('0'); }
}

function closeModal() {
  document.getElementById('modal-overlay').classList.remove('open');
  document.body.style.overflow = '';
}
function closeModalOutside(e) { if (e.target === document.getElementById('modal-overlay')) closeModal(); }
document.addEventListener('keydown', e => { if (e.key === 'Escape') closeModal(); });

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
//  CALCULATOR LOGIC
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
const fmt = (n, d=0) => n.toLocaleString('en-US', {minimumFractionDigits:d, maximumFractionDigits:d});
const fmtM = n => '$' + fmt(n, 0);
const fmtD = n => '$' + fmt(Math.abs(n), 0);

// MORTGAGE
function calcMortgage() {
  const price = parseFloat(document.getElementById('m-price').value)||0;
  const down = parseFloat(document.getElementById('m-down').value)||0;
  const rate = parseFloat(document.getElementById('m-rate').value)||0;
  const term = parseInt(document.getElementById('m-term').value);
  const loan = price - down;
  const r = rate / 100 / 12, n = term * 12;
  const monthly = r === 0 ? loan/n : loan * r * Math.pow(1+r,n) / (Math.pow(1+r,n)-1);
  const total = monthly * n;
  const interest = total - loan;
  document.getElementById('r-m-monthly').textContent = fmtM(monthly);
  document.getElementById('r-m-total').textContent = fmtM(total);
  document.getElementById('r-m-interest').textContent = fmtM(interest);
  document.getElementById('r-m-loan').textContent = fmtM(loan);
  const pct = interest / total * 100;
  document.getElementById('r-m-bar').innerHTML = `
    <div class="bar-row"><span class="bar-label">Principal</span><div class="bar-track"><div class="bar-fill" style="width:${100-pct}%;background:var(--accent)"></div></div><span class="bar-val">${fmtM(loan)}</span></div>
    <div class="bar-row"><span class="bar-label">Total Interest</span><div class="bar-track"><div class="bar-fill" style="width:${pct}%;background:var(--orange)"></div></div><span class="bar-val">${fmtM(interest)}</span></div>`;
  document.getElementById('r-mortgage').classList.add('show');
}

// LOAN
function calcLoan() {
  const amt = parseFloat(document.getElementById('l-amount').value)||0;
  const rate = parseFloat(document.getElementById('l-rate').value)||0;
  const n = parseInt(document.getElementById('l-term').value);
  const r = rate / 100 / 12;
  const monthly = r === 0 ? amt/n : amt * r * Math.pow(1+r,n) / (Math.pow(1+r,n)-1);
  const total = monthly * n;
  document.getElementById('r-l-monthly').textContent = fmtM(monthly);
  document.getElementById('r-l-total').textContent = fmtM(total);
  document.getElementById('r-l-interest').textContent = fmtM(total - amt);
  document.getElementById('r-loan').classList.add('show');
}

// COMPOUND INTEREST
function calcCompound() {
  const p = parseFloat(document.getElementById('ci-principal').value)||0;
  const r = parseFloat(document.getElementById('ci-rate').value)/100;
  const t = parseFloat(document.getElementById('ci-years').value)||0;
  const n = parseInt(document.getElementById('ci-freq').value);
  const contrib = parseFloat(document.getElementById('ci-contrib').value)||0;
  const fv = p * Math.pow(1 + r/n, n*t);
  const fvContrib = contrib * ((Math.pow(1+r/n, n*t) - 1) / (r/n));
  const total = fv + fvContrib;
  const contributed = p + contrib * 12 * t;
  document.getElementById('r-ci-final').textContent = fmtM(total);
  document.getElementById('r-ci-contributed').textContent = fmtM(contributed);
  document.getElementById('r-ci-earned').textContent = fmtM(total - contributed);
  document.getElementById('r-compound').classList.add('show');
}

// TIP
function calcTip() {
  const bill = parseFloat(document.getElementById('t-bill').value)||0;
  const tipPct = parseFloat(document.getElementById('t-tip').value)||0;
  const people = parseInt(document.getElementById('t-people').value)||1;
  const tip = bill * tipPct / 100;
  const total = bill + tip;
  document.getElementById('r-t-tip').textContent = fmtM(tip);
  document.getElementById('r-t-total').textContent = fmtM(total);
  document.getElementById('r-t-per').textContent = fmtM(total / people);
  document.getElementById('r-tip').classList.add('show');
}

// BMI
function updateBmiFields() {
  const u = document.getElementById('bmi-unit').value;
  document.getElementById('bmi-imperial-fields').style.display = u === 'imperial' ? '' : 'none';
  document.getElementById('bmi-metric-fields').style.display = u === 'metric' ? '' : 'none';
}
function calcBMI() {
  const u = document.getElementById('bmi-unit').value;
  let bmi, heightIn;
  if (u === 'imperial') {
    const lbs = parseFloat(document.getElementById('bmi-lbs').value)||0;
    heightIn = parseFloat(document.getElementById('bmi-inches').value)||1;
    bmi = (lbs / (heightIn * heightIn)) * 703;
    const lowLbs = 18.5 * heightIn * heightIn / 703;
    const highLbs = 24.9 * heightIn * heightIn / 703;
    document.getElementById('r-bmi-low').textContent = fmt(lowLbs, 0);
    document.getElementById('r-bmi-high').textContent = fmt(highLbs, 0);
  } else {
    const kg = parseFloat(document.getElementById('bmi-kg').value)||0;
    const cm = parseFloat(document.getElementById('bmi-cm').value)||1;
    const hm = cm / 100;
    bmi = kg / (hm * hm);
    const lowKg = 18.5 * hm * hm, highKg = 24.9 * hm * hm;
    document.getElementById('r-bmi-low').textContent = fmt(lowKg, 1) + ' kg';
    document.getElementById('r-bmi-high').textContent = fmt(highKg, 1) + ' kg';
  }
  document.getElementById('r-bmi-val').textContent = fmt(bmi, 1);
  const cats = [[18.5,'Underweight','var(--blue)'],[25,'Normal weight','var(--green)'],[30,'Overweight','var(--yellow)'],[Infinity,'Obese','var(--pink)']];
  const cat = cats.find(c => bmi < c[0]);
  const catEl = document.getElementById('r-bmi-cat');
  catEl.textContent = cat[1]; catEl.style.color = cat[2];
  document.getElementById('r-bmi').classList.add('show');
}

// CALORIES
function calcCalories() {
  const age = parseFloat(document.getElementById('cal-age').value)||0;
  const sex = document.getElementById('cal-sex').value;
  const wt = parseFloat(document.getElementById('cal-weight').value)||0;
  const ht = parseFloat(document.getElementById('cal-height').value)||0;
  const act = parseFloat(document.getElementById('cal-activity').value);
  const goal = parseInt(document.getElementById('cal-goal').value);
  const kg = wt * 0.453592, cm = ht * 2.54;
  const bmr = sex === 'male' ? 10*kg + 6.25*cm - 5*age + 5 : 10*kg + 6.25*cm - 5*age - 161;
  const tdee = bmr * act;
  const target = tdee + goal;
  document.getElementById('r-cal-bmr').textContent = fmt(bmr, 0) + ' cal';
  document.getElementById('r-cal-tdee').textContent = fmt(tdee, 0) + ' cal';
  document.getElementById('r-cal-target').textContent = fmt(target, 0);
  document.getElementById('r-calories').classList.add('show');
}

// MACROS
function calcMacros() {
  const cals = parseFloat(document.getElementById('mac-cal').value)||2000;
  const goal = document.getElementById('mac-goal').value;
  const splits = { cut:[0.4,0.35,0.25], maintain:[0.3,0.4,0.3], bulk:[0.25,0.5,0.25] };
  const [p,c,f] = splits[goal];
  const protein = cals * p / 4, carbs = cals * c / 4, fat = cals * f / 9;
  document.getElementById('r-mac-protein').textContent = fmt(protein,0)+'g';
  document.getElementById('r-mac-carbs').textContent = fmt(carbs,0)+'g';
  document.getElementById('r-mac-fat').textContent = fmt(fat,0)+'g';
  document.getElementById('r-mac-bar').innerHTML = `
    <div class="bar-row"><span class="bar-label">Protein</span><div class="bar-track"><div class="bar-fill" style="width:${p*100}%;background:var(--pink)"></div></div><span class="bar-val">${(p*100).toFixed(0)}%</span></div>
    <div class="bar-row"><span class="bar-label">Carbs</span><div class="bar-track"><div class="bar-fill" style="width:${c*100}%;background:var(--yellow)"></div></div><span class="bar-val">${(c*100).toFixed(0)}%</span></div>
    <div class="bar-row"><span class="bar-label">Fats</span><div class="bar-track"><div class="bar-fill" style="width:${f*100}%;background:var(--orange)"></div></div><span class="bar-val">${(f*100).toFixed(0)}%</span></div>`;
  document.getElementById('r-macros').classList.add('show');
}

// SALARY
function calcSalary() {
  const amt = parseFloat(document.getElementById('sal-amount').value)||0;
  const period = document.getElementById('sal-period').value;
  const hrs = parseFloat(document.getElementById('sal-hours').value)||40;
  let annual;
  if (period==='hour') annual = amt * hrs * 52;
  else if (period==='day') annual = amt * 5 * 52;
  else if (period==='week') annual = amt * 52;
  else if (period==='month') annual = amt * 12;
  else annual = amt;
  document.getElementById('r-sal-hour').textContent = fmtM(annual / 52 / hrs);
  document.getElementById('r-sal-day').textContent = fmtM(annual / 260);
  document.getElementById('r-sal-week').textContent = fmtM(annual / 52);
  document.getElementById('r-sal-month').textContent = fmtM(annual / 12);
  document.getElementById('r-sal-year').textContent = fmtM(annual);
  document.getElementById('r-salary').classList.add('show');
}

// PERCENTAGE
function calcPct1() { const r = (parseFloat(document.getElementById('p1-x').value)||0) / 100 * (parseFloat(document.getElementById('p1-y').value)||0); document.getElementById('r-p1').textContent = fmt(r,2); }
function calcPct2() { const x = parseFloat(document.getElementById('p2-x').value)||0, y = parseFloat(document.getElementById('p2-y').value)||1; document.getElementById('r-p2').textContent = fmt(x/y*100,2)+'%'; }
function calcPct3() { const x = parseFloat(document.getElementById('p3-x').value)||0, y = parseFloat(document.getElementById('p3-y').value)||0; const pct = (y-x)/Math.abs(x||1)*100; const el = document.getElementById('r-p3'); el.textContent = (pct>=0?'+':'')+fmt(pct,2)+'%'; el.style.color = pct>=0?'var(--green)':'var(--pink)'; }

// AGE
function calcAge() {
  const dob = new Date(document.getElementById('age-dob').value);
  const ref = new Date(document.getElementById('age-today').value);
  let years = ref.getFullYear() - dob.getFullYear();
  let months = ref.getMonth() - dob.getMonth();
  if (months < 0 || (months === 0 && ref.getDate() < dob.getDate())) { years--; months += 12; }
  const days = Math.floor((ref - dob) / 86400000);
  const next = new Date(ref.getFullYear(), dob.getMonth(), dob.getDate());
  if (next <= ref) next.setFullYear(next.getFullYear() + 1);
  const daysToB = Math.floor((next - ref) / 86400000);
  document.getElementById('r-age-years').textContent = years;
  document.getElementById('r-age-months').textContent = fmt(years*12+months,0);
  document.getElementById('r-age-days').textContent = fmt(days,0);
  document.getElementById('r-age-next').textContent = daysToB === 0 ? 'ğŸ‰ Today!' : daysToB;
  document.getElementById('r-age').classList.add('show');
}

// GPA
function initGPA() {
  document.getElementById('gpa-rows').innerHTML = '';
  for(let i=0;i<4;i++) addGpaRow();
}
function addGpaRow() {
  const d = document.createElement('div');
  d.style.cssText = 'display:grid;grid-template-columns:1fr 100px 80px;gap:0.5rem;margin-bottom:0.5rem;';
  d.innerHTML = `
    <input type="text" placeholder="Course name" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.55rem 0.75rem;font-family:inherit;font-size:0.9rem;color:var(--text);outline:none;">
    <select style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.55rem;font-family:inherit;font-size:0.9rem;color:var(--text);outline:none;">
      <option value="4">A (4.0)</option><option value="3.7">A- (3.7)</option>
      <option value="3.3">B+ (3.3)</option><option value="3">B (3.0)</option>
      <option value="2.7">B- (2.7)</option><option value="2.3">C+ (2.3)</option>
      <option value="2">C (2.0)</option><option value="1.7">C- (1.7)</option>
      <option value="1">D (1.0)</option><option value="0">F (0.0)</option>
    </select>
    <input type="number" value="3" min="0" max="6" placeholder="Credits" style="background:var(--surface2);border:1px solid var(--border);border-radius:8px;padding:0.55rem;font-family:inherit;font-size:0.9rem;color:var(--text);outline:none;">`;
  document.getElementById('gpa-rows').appendChild(d);
}
function calcGPA() {
  const rows = document.getElementById('gpa-rows').children;
  let totalPts = 0, totalCredits = 0;
  for (const row of rows) {
    const grade = parseFloat(row.querySelectorAll('select, input[type=number]')[0]?.value || row.querySelector('select').value);
    const credits = parseFloat(row.querySelectorAll('input[type=number]')[0]?.value || 3);
    if (isNaN(grade) || isNaN(credits)) continue;
    totalPts += grade * credits; totalCredits += credits;
  }
  const gpa = totalCredits > 0 ? totalPts / totalCredits : 0;
  document.getElementById('r-gpa-val').textContent = gpa.toFixed(2);
  document.getElementById('r-gpa-credits').textContent = totalCredits;
  const letter = gpa>=3.7?'A+':gpa>=3.3?'A':gpa>=3?'A-':gpa>=2.7?'B+':gpa>=2.3?'B':gpa>=2?'B-':gpa>=1.7?'C+':gpa>=1?'C':'F';
  document.getElementById('r-gpa-letter').textContent = letter;
  document.getElementById('r-gpa').classList.add('show');
}

// FUEL
function calcFuel() {
  const dist = parseFloat(document.getElementById('fuel-dist').value)||0;
  const mpg = parseFloat(document.getElementById('fuel-mpg').value)||1;
  const price = parseFloat(document.getElementById('fuel-price').value)||0;
  const gallons = dist / mpg;
  const cost = gallons * price;
  document.getElementById('r-fuel-cost').textContent = fmtM(cost);
  document.getElementById('r-fuel-gallons').textContent = fmt(gallons,1);
  document.getElementById('r-fuel-per100').textContent = fmtM(cost * 100 / dist);
  document.getElementById('r-fuel').classList.add('show');
}

// ROI
function calcROI() {
  const invest = parseFloat(document.getElementById('roi-invest').value)||1;
  const final = parseFloat(document.getElementById('roi-final').value)||0;
  const years = parseFloat(document.getElementById('roi-years').value)||1;
  const profit = final - invest;
  const roi = profit / invest * 100;
  const annualRoi = (Math.pow(final/invest, 1/years) - 1) * 100;
  const el = document.getElementById('r-roi-pct');
  el.textContent = (roi>=0?'+':'')+fmt(roi,1)+'%';
  el.style.color = roi >= 0 ? 'var(--green)' : 'var(--pink)';
  document.getElementById('r-roi-profit').textContent = (profit>=0?'':'-')+'$'+fmt(Math.abs(profit),0);
  document.getElementById('r-roi-annual').textContent = (annualRoi>=0?'+':'')+fmt(annualRoi,1)+'%';
  document.getElementById('r-roi').classList.add('show');
}

// CREDIT CARD
function calcCreditCard() {
  const balance = parseFloat(document.getElementById('cc-balance').value)||0;
  const apr = parseFloat(document.getElementById('cc-apr').value)||0;
  const payment = parseFloat(document.getElementById('cc-payment').value)||0;
  const r = apr / 100 / 12;
  if (payment <= balance * r) {
    document.getElementById('r-cc-months').textContent = 'âˆ (payment too low)';
    document.getElementById('r-cc-interest').textContent = 'âˆ';
    document.getElementById('r-cc-total').textContent = 'âˆ';
    document.getElementById('r-cc').classList.add('show');
    return;
  }
  const months = Math.ceil(-Math.log(1 - (r * balance / payment)) / Math.log(1 + r));
  const totalPaid = payment * months;
  document.getElementById('r-cc-months').textContent = months < 12 ? months+' months' : (months/12).toFixed(1)+' years';
  document.getElementById('r-cc-interest').textContent = fmtM(totalPaid - balance);
  document.getElementById('r-cc-total').textContent = fmtM(totalPaid);
  document.getElementById('r-cc').classList.add('show');
}

// WATER
function calcWater() {
  const lbs = parseFloat(document.getElementById('wat-weight').value)||0;
  const act = parseFloat(document.getElementById('wat-activity').value);
  const oz = lbs * 0.5 * act;
  document.getElementById('r-wat-oz').textContent = fmt(oz,0)+' oz';
  document.getElementById('r-wat-cups').textContent = fmt(oz/8,1);
  document.getElementById('r-wat-liters').textContent = fmt(oz*0.0295735,1)+' L';
  document.getElementById('r-water').classList.add('show');
}

// DATE DIFF
function calcDateDiff() {
  const start = new Date(document.getElementById('dd-start').value);
  const end = new Date(document.getElementById('dd-end').value);
  const diffMs = Math.abs(end - start);
  const days = Math.floor(diffMs / 86400000);
  document.getElementById('r-dd-days').textContent = fmt(days,0);
  document.getElementById('r-dd-weeks').textContent = fmt(days/7,1);
  document.getElementById('r-dd-months').textContent = fmt(days/30.44,1);
  document.getElementById('r-datediff').classList.add('show');
}

// TAX
function calcTax() {
  const price = parseFloat(document.getElementById('stax-price').value)||0;
  const rate = parseFloat(document.getElementById('stax-rate').value)||0;
  const mode = document.getElementById('stax-mode').value;
  let pre, taxAmt, total;
  if (mode === 'add') { pre = price; taxAmt = price * rate/100; total = pre + taxAmt; }
  else { total = price; pre = price / (1 + rate/100); taxAmt = total - pre; }
  document.getElementById('r-tax-pre').textContent = fmtM(pre);
  document.getElementById('r-tax-amount').textContent = fmtM(taxAmt);
  document.getElementById('r-tax-total').textContent = fmtM(total);
  document.getElementById('r-tax').classList.add('show');
}

// RANDOM
function calcRandom() {
  const min = parseInt(document.getElementById('rng-min').value)||0;
  const max = parseInt(document.getElementById('rng-max').value)||100;
  const count = Math.min(parseInt(document.getElementById('rng-count').value)||1, 50);
  const nums = Array.from({length:count}, () => Math.floor(Math.random()*(max-min+1))+min);
  document.getElementById('r-rng-numbers').innerHTML = nums.join('  Â·  ');
  document.getElementById('r-random').classList.add('show');
}

// PACE
function updatePaceFields() {
  const solve = document.getElementById('pace-solve').value;
  document.getElementById('pace-pace-field').style.display = solve === 'pace' ? 'none' : '';
}
function calcPace() {
  const solve = document.getElementById('pace-solve').value;
  const dist = parseFloat(document.getElementById('pace-dist').value)||0;
  const h = parseInt(document.getElementById('pace-h').value)||0;
  const m = parseInt(document.getElementById('pace-m').value)||0;
  const s = parseInt(document.getElementById('pace-s').value)||0;
  const totalSec = h*3600 + m*60 + s;
  const pMin = parseInt(document.getElementById('pace-min')?.value||0);
  const pSec = parseInt(document.getElementById('pace-sec')?.value||0);
  let result, label;
  if (solve === 'pace') {
    const secPerKm = totalSec / dist;
    result = Math.floor(secPerKm/60)+':'+String(Math.round(secPerKm%60)).padStart(2,'0')+' /km';
    label = 'Pace';
  } else if (solve === 'time') {
    const paceSec = pMin*60+pSec;
    const totalT = paceSec * dist;
    result = Math.floor(totalT/3600)+'h '+Math.floor((totalT%3600)/60)+'m '+Math.round(totalT%60)+'s';
    label = 'Finish Time';
  } else {
    const paceSec = pMin*60+pSec;
    result = fmt(totalSec/paceSec,2)+' km';
    label = 'Distance';
  }
  document.getElementById('r-pace-result').textContent = result;
  document.getElementById('r-pace-label').textContent = label;
  document.getElementById('r-pace').classList.add('show');
}

// â”€â”€ UNIT CONVERTER â”€â”€
const unitData = {
  length: { units: ['Millimeter','Centimeter','Meter','Kilometer','Inch','Foot','Yard','Mile'], toBase: [0.001,0.01,1,1000,0.0254,0.3048,0.9144,1609.344] },
  weight: { units: ['Milligram','Gram','Kilogram','Tonne','Ounce','Pound','Stone'], toBase: [0.000001,0.001,1,1000,0.0283495,0.453592,6.35029] },
  temp: { units: ['Celsius','Fahrenheit','Kelvin'], toBase: null },
  volume: { units: ['Milliliter','Liter','Cup','Fluid Ounce','Pint','Quart','Gallon'], toBase: [0.001,1,0.236588,0.0295735,0.473176,0.946353,3.78541] },
  speed: { units: ['m/s','km/h','mph','knot'], toBase: [1,0.277778,0.44704,0.514444] }
};
function updateUnitOptions() {
  const cat = document.getElementById('unit-cat').value;
  const data = unitData[cat];
  const fromSel = document.getElementById('unit-from');
  const toSel = document.getElementById('unit-to');
  fromSel.innerHTML = data.units.map((u,i)=>`<option value="${i}">${u}</option>`).join('');
  toSel.innerHTML = data.units.map((u,i)=>`<option value="${i}">${u}</option>`).join('');
  toSel.selectedIndex = 1;
  calcUnits();
}
function calcUnits() {
  if (!document.getElementById('unit-cat')) return;
  const cat = document.getElementById('unit-cat').value;
  const fromI = parseInt(document.getElementById('unit-from').value);
  const toI = parseInt(document.getElementById('unit-to').value);
  const val = parseFloat(document.getElementById('unit-val').value)||0;
  const data = unitData[cat];
  let result;
  if (cat === 'temp') {
    const units = data.units;
    let celsius;
    if (fromI===0) celsius=val; else if (fromI===1) celsius=(val-32)*5/9; else celsius=val-273.15;
    if (toI===0) result=celsius; else if (toI===1) result=celsius*9/5+32; else result=celsius+273.15;
  } else {
    const base = val * data.toBase[fromI];
    result = base / data.toBase[toI];
  }
  const el = document.getElementById('r-unit-result');
  if (el) {
    el.textContent = Math.abs(result) < 0.001 || Math.abs(result) > 1e7 ? result.toExponential(4) : fmt(result, 4).replace(/\.?0+$/, '');
    document.getElementById('r-unit-label').textContent = `${data.units[fromI]} â†’ ${data.units[toI]}`;
  }
}

// â”€â”€ SCIENTIFIC CALCULATOR â”€â”€
let sciExpr = '', sciResult = null;
function sciDisplay(val) { if(document.getElementById('sci-display')) document.getElementById('sci-display').textContent = val; }
function sciExprDisplay(val) { if(document.getElementById('sci-expr')) document.getElementById('sci-expr').textContent = val; }
function sciKey(k) {
  if (k==='C') { sciExpr=''; sciResult=null; sciDisplay('0'); sciExprDisplay(''); return; }
  if (k==='CE') { sciExpr=sciExpr.slice(0,-1)||''; sciDisplay(sciExpr||'0'); return; }
  if (k==='âŒ«') { sciExpr=sciExpr.slice(0,-1); sciDisplay(sciExpr||'0'); return; }
  if (k==='=') {
    try {
      let expr = sciExpr
        .replace(/Ã·/g,'/').replace(/Ã—/g,'*').replace(/Ï€/g,'Math.PI').replace(/e(?!xp)/g,'Math.E')
        .replace(/sin\(/g,'Math.sin(').replace(/cos\(/g,'Math.cos(').replace(/tan\(/g,'Math.tan(')
        .replace(/log\(/g,'Math.log10(').replace(/ln\(/g,'Math.log(')
        .replace(/âˆš\(/g,'Math.sqrt(').replace(/xÂ²/g,'**2').replace(/\^/g,'**')
        .replace(/1\/x/g,'1/x');
      const res = Function('"use strict";return('+expr+')')();
      sciExprDisplay(sciExpr + ' =');
      sciExpr = String(parseFloat(res.toFixed(10)));
      sciDisplay(sciExpr);
    } catch(e) { sciDisplay('Error'); sciExpr=''; }
    return;
  }
  const map = {'Ã·':'Ã·','Ã—':'Ã—','xÂ²':'Â²','1/x':'1/(','âˆš':'âˆš(','Ï€':'Ï€','e':'e','^':'^'};
  const funcs = ['sin','cos','tan','log','ln'];
  if (funcs.includes(k)) { sciExpr += k+'('; }
  else { sciExpr += k; }
  sciDisplay(sciExpr);
}

// â”€â”€ INIT â”€â”€
document.getElementById('global-search').addEventListener('keydown', e => { if(e.key==='Escape') { e.target.value=''; searchCalcs(''); } });

// Set today's date for age calc if needed
window.addEventListener('load', () => {});
</script>
</body>
</html>
